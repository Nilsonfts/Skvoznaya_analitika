# 📝 Справочник переменных окружения

## 🚨 Обязательные переменные

| Переменная | Описание | Пример |
|-----------|----------|---------|
| `BOT_TOKEN` | Токен Telegram бота от @BotFather | `123456789:ABC-DEF1234ghIkl-zyx57W2v1u123ew11` |
| `GOOGLE_CREDENTIALS_JSON` | JSON-ключ сервисного аккаунта Google API | `{"type": "service_account", ...}` |
| `SPREADSHEET_ID` | ID основной Google таблицы | `1QL1CRY3M9Av-WlDS5gswA2Lq14OPdt0TME_dpwPIuC4` |

## 👥 Администрирование

| Переменная | Описание | Пример |
|-----------|----------|---------|
| `ADMIN_IDS` | ID администраторов Telegram (через запятую) | `196614680,1334453330` |
| `REPORT_CHAT_ID` | ID чатов/каналов для автоотчётов (через запятую) | `-1002655754865,-1002813620544` |
| `SMM_IDS` | ID ответственных за маркетинг | `123456789,987654321` |

## 📊 Аналитические сервисы

### Yandex Метрика
| Переменная | Описание | Пример |
|-----------|----------|---------|
| `METRIKA_COUNTER_ID` | ID счётчика Яндекс.Метрики | `101368505` |
| `METRIKA_OAUTH_TOKEN` | OAuth токен для API Метрики | `y0_AgA...` |

### Google Analytics
| Переменная | Описание | Пример |
|-----------|----------|---------|
| `GA_PROPERTY_ID` | ID свойства GA4 или VIEW_ID для UA | `123456789` |
| `GA_CREDENTIALS_JSON` | JSON-ключ для GA API | `{"type": "service_account", ...}` |
| `GA_MEASUREMENT_ID` | Measurement ID для Measurement Protocol | `G-XXXXXXXXXX` |
| `GA_API_SECRET` | API Secret для Measurement Protocol | `abcdefgh12345678` |

## 💾 Базы данных

### PostgreSQL
| Переменная | Описание | Пример |
|-----------|----------|---------|
| `USE_POSTGRES` | Использовать PostgreSQL (true/false) | `false` |
| `DATABASE_URL` | Строка подключения к PostgreSQL | `postgresql://user:pass@host:port/db` |

### Redis
| Переменная | Описание | Пример | По умолчанию |
|-----------|----------|---------|-------------|
| `REDIS_HOST` | Хост Redis сервера | `localhost` | `localhost` |
| `REDIS_PORT` | Порт Redis сервера | `6379` | `6379` |
| `REDIS_DB` | Номер базы данных Redis | `0` | `0` |
| `REDIS_PASSWORD` | Пароль Redis (если нужен) | `mypassword` | - |

## 🕐 Расписание и уведомления

| Переменная | Описание | Пример | По умолчанию |
|-----------|----------|---------|-------------|
| `DAILY_REPORT_TIME` | Время ежедневного отчёта (HH:MM) | `09:00` | `09:00` |
| `WEEKLY_REPORT_DAY` | День недельного отчёта | `monday` | `monday` |
| `MONTHLY_REPORT_DAY` | День месячного отчёта (1-28) | `1` | `1` |
| `TIMEZONE` | Часовой пояс | `Europe/Moscow` | `Europe/Moscow` |

## 🔧 Дополнительные настройки

| Переменная | Описание | Пример | По умолчанию |
|-----------|----------|---------|-------------|
| `DEBUG_MODE` | Режим отладки (true/false) | `false` | `false` |
| `LOG_LEVEL` | Уровень логирования | `INFO` | `INFO` |
| `MAX_CONCURRENT_REQUESTS` | Макс. одновременных запросов | `10` | `10` |
| `REQUEST_TIMEOUT` | Таймаут запросов (секунды) | `30` | `30` |

## 🔗 Интеграции

| Переменная | Описание | Пример |
|-----------|----------|---------|
| `AMOCRM_SHEET_ID` | ID таблицы с выгрузкой AmoCRM | `1ABC...` |

## 🔄 Совместимость

Для обратной совместимости поддерживаются старые названия:

| Старое название | Новое название |
|----------------|----------------|
| `TELEGRAM_TOKEN` | `BOT_TOKEN` |
| `GOOGLE_CREDENTIALS_FILE` | `GOOGLE_CREDENTIALS_JSON` |
| `METRIKA_ACCESS_TOKEN` | `METRIKA_OAUTH_TOKEN` |

## 📋 Пример полного .env файла

```bash
# ────────────────────────────────────────────────────────────────
# Базовые параметры (обязательно)
# ────────────────────────────────────────────────────────────────
BOT_TOKEN="123456789:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"
GOOGLE_CREDENTIALS_JSON='{"type": "service_account", "project_id": "...", ...}'
SPREADSHEET_ID="1QL1CRY3M9Av-WlDS5gswA2Lq14OPdt0TME_dpwPIuC4"

# ────────────────────────────────────────────────────────────────
# Администрирование
# ────────────────────────────────────────────────────────────────
ADMIN_IDS="196614680,1334453330"
REPORT_CHAT_ID="-1002655754865,-1002813620544"

# ────────────────────────────────────────────────────────────────
# Yandex Метрика
# ────────────────────────────────────────────────────────────────
METRIKA_COUNTER_ID="101368505"
METRIKA_OAUTH_TOKEN="y0_AgA..."

# ────────────────────────────────────────────────────────────────
# Дополнительные настройки
# ────────────────────────────────────────────────────────────────
DEBUG_MODE="false"
LOG_LEVEL="INFO"
TIMEZONE="Europe/Moscow"
```

## 🛠️ Валидация

Для проверки корректности всех переменных используйте:

```bash
python validate_config.py
```

Скрипт проверит:
- ✅ Наличие обязательных переменных
- 🔍 Корректность форматов токенов и ID  
- 📝 Валидность JSON ключей
- 💡 Даст рекомендации по исправлению

## 🚀 Быстрый старт

1. **Скопируйте шаблон:**
   ```bash
   cp .env.example .env
   ```

2. **Заполните обязательные поля:**
   - `BOT_TOKEN` - получите у @BotFather
   - `GOOGLE_CREDENTIALS_JSON` - JSON ключ Google API
   - `SPREADSHEET_ID` - ID вашей таблицы

3. **Проверьте конфигурацию:**
   ```bash
   python validate_config.py
   ```

4. **Запустите бота:**
   ```bash
   python bot.py
   ```

Готово! 🎉
